
function showFareRulesPopUp(){$("#window").dialog("open");$.ajax({url:"/getrules",cache:false,success:function(data){if(data==null||data.Successful==false){var header="Flight rules";var body="<p>Read up on the ins and outs of your flight, brought to you straight from the Command Center.</div><div class='frules_text'>"+data.Message+"</p>";$("#window").dialog("close");ShowPopUp(header,body);}
else{var header="Flight rules";var body=MapFareRulesData(data);$("#window").dialog("close");ShowPopUp(header,body,500,500,false);}}});}
function getRulesHTML(div){$("#window").dialog("open");$.ajax({url:"/getrules",cache:false,success:function(data){if(data==null||data.Successful==false){var header="<h2>Flight rules</h2>";var body="<p>Read up on the ins and outs of your flight, brought to you straight from the Command Center.</div><div class='frules_text'>"+data.Message+"</p>";div.html(header+body);}
else{var header="<h2>Flight rules</h2>";var body=MapFareRulesData(data);div.html(header+body);}
$("#window").dialog("close");},error:function(){$("#window").dialog("close");}});}
function getReviwRulesHTML(div){$("#window").dialog("open");$.ajax({url:"/getreviewrules",cache:false,success:function(data){if(data==null||data.Successful==false){var header="<h2>Flight rules</h2>";var body="<p>Read up on the ins and outs of your flight, brought to you straight from the Command Center.</div><div class='frules_text'>"+data.Message+"</p>";div.html(header+body);}
else{var header="<h2>Flight rules</h2>";var body=MapFareRulesData(data);div.html(header+body);}
$("#window").dialog("close");},error:function(){$("#window").dialog("close");}});}
function MapFareRulesData(data){var header="<p>Read up on the ins and outs of your flight, brought to you straight from the Command Center.</p>";var ruleHeadMarkUp="";var ruleBodyMarkUp="";for(var flightCount=0;flightCount<data.length;flightCount++){if(flightCount==0){ruleHeadMarkUp+="<div onclick='javascript:fareRuleChange(this)' class='flrules_route_selected' id='rulehead"+flightCount+"'>"+data[flightCount].DepartureAirportCode+" - "+data[flightCount].ArrivalAirportCode+"</div>";ruleBodyMarkUp+="<div id='rulebody"+flightCount+"' style='overflow:auto;height:200px;' class='flrules_block'>";}
else{ruleHeadMarkUp+="<div onclick='javascript:fareRuleChange(this)' class='flrules_route' id='rulehead"+flightCount+"'>"+data[flightCount].DepartureAirportCode+" - "+data[flightCount].ArrivalAirportCode+"</div>";ruleBodyMarkUp+="<div id='rulebody"+flightCount+"' style='overflow:auto;height:200px;display:none' class='flrules_block'>";}
ruleBodyMarkUp+="<div style='display:inline-block' class='frules_text'>FARE BASIS:</div><div style='display:inline-block' class='frules_text'>"+data[flightCount].FareBaseCode+"</div>";if(data[flightCount].Rules==null){ruleBodyMarkUp+="<div class='frules_text'>FARE RULES ARE UNAVAILABLE</div>";}
else{for(var ruleCount=0;ruleCount<data[flightCount].Rules.length;ruleCount++){ruleBodyMarkUp+="<h5>"+data[flightCount].Rules[ruleCount].Title+"</h5><div class='frules_text'>"+data[flightCount].Rules[ruleCount].Detail+"</div>";}}
ruleBodyMarkUp+="</div>";}
return header+ruleHeadMarkUp+ruleBodyMarkUp;}
function fareRuleChange(rule){$("div[id^='rulebody']").hide();var bodyId=rule.id.replace('rulehead','rulebody');$("div[id='"+bodyId+"']").show();$("div[id^='rulehead']").removeClass('flrules_route_selected').addClass('flrules_route');$("div[id='"+rule.id+"']").removeClass('flrules_route').addClass('flrules_route_selected');}